var smartsearchIdArray=new Array;var smartsearchUnitArray=new Array;var smartsearchArray=new Array;var ingredientSearchArray=new Array;var allRecipesResult=[];$(document).ready(function(){favoriteButtons();window.upButton=new UpButton;DoYouKnowThat("do-you-know-that");$(".recipe, .topic_item").addtocopy({htmlcopytxt:'<br>Подробнее: <a href="'+window.location.href+'">'+window.location.href+"</a>",minlen:50,addcopyfirst:false});$.cookie("gogogo",null);$(".input_file").each(function(){new InputFile($(this))});$(document).bind("click",function(){$("#top_search_list").children("ul").css({display:"none"});$("#top_panel span.kitchen > span.submenu").slideUp("middle").siblings("a").children("span").addClass("up").removeClass("down");$("#top_panel div.add span.body").slideUp("middle");$("#filter_list:visible").slideUp("fast",function(){$("#filter_recipes .open").removeClass("open")})});buttonActions();$("#comment_form textarea").resizeTextarea();new FilterRecipes;$(".b-filter").each(function(){new Filter($(this))});new FilterList;new SearchRecipeFeed;valignRecipePreviewPhoto();$(".topic_item #html_code").click(function(){var e=$(".topic_item"),t=window.open("","HTMLcode","width=800, height=800, toolbar=0, scrollbars=yes, status=0, directories=0, location=0, menubar=0, resizable=0"),i=e.find("h1").text(),n=e.find(".text"),a=$("<div></div>");a.html(n.html());a=s(a);var r=o(a);t.document.write('<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=windows-1251" /><title>HTML-код</title></head><body><textarea cols="80" rows="40">'+r+"</textarea></body></html>");t.document.getElementsByTagName("TEXTAREA")[0].focus();return false;function s(e){e.find("[src]").each(function(){var e=$(this).attr("src");if(/^http/i.test(e))return;$(this).attr({src:window.location.protocol+"//"+window.location.hostname+e})}).find("[href]").each(function(){var e=$(this).attr("href");if(/^http/i.test(e))return;$(this).attr({href:window.location.protocol+"//"+window.location.hostname+e})});return e}function o(e){var t=e.find('[name="cut"]');if(t.size()==0)return e.html();t.before("<lj-cut></lj-cut>").remove();var i=e.html();i+="";i=i.split("</lj-cut>");i=i[0]+i[1]+"</lj-cut>";return i}});$("#top_panel span.kitchen > a").click(function(e){$(this).siblings("span.submenu").slideToggle("middle").end().children("span").toggleClass("up").toggleClass("down");stopEvent(this,e);return false});$("#top_panel div.add > a.button").click(function(e){$(this).siblings("span.submenu").children("span.body").slideToggle("middle");stopEvent(this,e);return false});$("div.share > a").click(function(){$(this).closest("div.bar").next("div.share_bar").slideToggle("middle");$(this).parent().toggleClass("open");return false});$("input.button_obj").hover(function(){$(this).addClass("button_obj_hover")},function(){$(this).removeClass("button_obj_hover")});$("input.button_obj").mousedown(function(){$(this).addClass("button_obj_press")});if(String(window.location).search("#add_opinion")!=-1){$("#opinion_form").find("textarea").focus()}$("a[href='#add_opinion']").click(function(){$("#opinion_form").find("textarea").focus();return false});$("#search_list_layer div.relative div.close_icon").click(function(){showHideLayer("top_layer");showHideLayer("search_list_layer");$("#search_list_layer div.relative div.padding div.column").empty()});$("#search_list_layer div.relative div.padding div.button").click(function(){writeChosenItems(this);showHideLayer("top_layer");showHideLayer("search_list_layer");$("#search_list_layer div.relative div.padding div.column").empty();document.getElementById("recipe_search_field").focus()});$("#recipe_line_block").find("div.big_photo").each(function(){$(this).appendTo($("#big_recipe_photos"))});$(document).delegate("div.photo, div.author_photo","mouseenter",function(){$(this).children("div.big_photo").css({display:"block"})}).delegate("div.photo, div.author_photo","mouseleave",function(){$(this).children("div.big_photo").css({display:"none"})});$("#recipe_line_block").find("div.photo").children("img").mouseover(function(){var e="-121px";var t=pageX(this)-pageX(document.getElementById("recipe_line_block"))-12;$("#"+$(this).parent().attr("id")+"_big").children("div").css({top:e,left:t});$("#"+$(this).parent().attr("id")+"_big").css({display:"block"})});$("#recipe_line_block").find("div.big_photo").hover(function(){},function(){$(this).animate({opacity:"hide"},"fast")});$("div.search_field form input.button").click(function(){searchForm(this);return false});$("div.search_field div.search_delete").click(function(){$(this).siblings("form").children("input.text").attr({value:""});$("#recipe_search_field").focus();$("#top_search_list").children("ul").css({display:"none"})});$("#recipe_search_field").focus(function(){if(this.value=="Я ищу"){this.value=""}});$("#recipe_search_field").blur(function(){if(this.value==""){this.value="Я ищу"}});$("#authorization_layer div.relative div.padding div.button").click(function(){checkALayer(this)});$("#authorization_layer div.relative div.padding div.bar div a").click(function(){var e=$(this).parent().parent().parent().children("div.body").children("div.act");$(e).removeClass("act");$(e).slideUp("middle");$(e).find("div.form_field").removeClass("attention").children("input").attr({value:""});$(e).find("div.form_field").children("input[name='open_id']").attr({value:"http://"});$(this).parent().parent().children("div.act").removeClass("act");$(this).parent().addClass("act");$("#"+$(this).attr("rel")).addClass("act");$("#"+$(this).attr("rel")).slideDown("middle");$("#"+$(this).attr("rel")).find("div.fields").find("input:eq(0)").focus();return false});$("#authorization_layer div.relative div.close_icon").click(function(){showHideLayer("top_layer");showHideLayer("authorization_layer")});$("#form div.button_authorization").click(function(){checkAForm(this)});$("#form div.authorization").find("input.text").keypress(function(e){if(e.which==13){checkAForm(this)}});$("#form div.lj_id").find("input.text").keypress(function(e){if(e.which==13){checkAForm(this)}});$("#form div.open_id").find("input.text").keypress(function(e){if(e.which==13){checkAForm(this)}});$("#form div.authorization form div div.remember a").click(function(){if(this.parentNode.className.search("chosen")!=-1){$(this).parent().removeClass("chosen");$(this).siblings("input").attr({value:"N"})}else{$(this).parent().addClass("chosen");$(this).siblings("input").attr({value:"Y"})}return false});$("#form div h2 a").click(function(){var e=$(this).parent().parent().parent().children("div.act").removeClass("act");$(e).find("div.fields").slideUp("middle");$(e).find("div.form_field").removeClass("attention").children("input").attr({value:""});$(e).find("div.form_field").removeClass("attention").children("input[name='open_id']").attr({value:"http://"});$(this).parent().parent().addClass("act");$(this).parent().parent().find("div.fields").slideDown("middle");return false});$("#form").find("div.button").click(function(){checkForm(this)});$("input.text").keypress(function(e){if(e.which==13){if($(this).attr("id")=="helper_smartsearch"){return false}else if($(this).attr("id")=="recipe_search_field"){return false}else if($(this).parents("#dish_stages").size()!=0){if($(this).hasClass("unit")){if($(this).attr("value")!=""){if($(this).closest("div.item").next("div.item").size()!=0){$(this).closest("div.item").next("div.item").find("input.smartsearch").focus()}else{$(this).closest("div.ingredient").find("div.add_ingredient").children("a").click()}}}else{$(this).siblings("div.search_list").children("ul").css({display:"none"}).empty();showUnitField(this)}return false}else if($(this).hasClass("smartsearch")){return false}else if(!$(this).attr("name")||$(this).parents("form").attr("name")=="authorization"||$(this).parents("form").attr("name")=="open_id"){checkALayer(this)}else{checkForm(this);return false}}});$("#opinion_block").find("div.edit").click(function(){$("#opinion_block").find("div.opinion").removeClass("edit_form");$(this).parents("div.opinion").addClass("edit_form")});$("#opinion_block, #comment_form").find("div.button").click(function(){checkForm(this)});$("#opinion_form").find("textarea").keyup(function(e){var t=this.parentNode;for(var i=0;i<t.childNodes.length;i++){if(t.childNodes[i].className.search("button")!=-1){var n=t.childNodes[i]}}if(e.ctrlKey&&e.keyCode==13){checkForm(n)}}).keydown(function(e){var t=this.parentNode;for(var i=0;i<t.childNodes.length;i++){if(t.childNodes[i].className.search("button")!=-1){var n=t.childNodes[i]}}if(e.ctrlKey&&e.keyCode==13){checkForm(n)}});$("#opinion_block").find("div.delete").click(function(){if(!confirm("Удалить отзыв?")){return false}else{var e=$(this).parents("div.opinion").attr("id");var t=$("#text_space").children("div.recipe").attr("id");var i=String(window.location).split(document.domain)[0]+document.domain+"/comment.php?cId="+e+"&rId="+t+"&a=d";window.location.href=i}});$("#opinion_block div.close_icon").click(function(){$(this).parents("div.opinion").removeClass("edit_form")});$("div.comments_block").delegate("div.reply_string a","click",function(){if($(this).hasClass("i-open")){$("#reply_form div.close_icon div").click();return false}$("div.comments_block div.comment").removeClass("edit_form");$("div.comments_block div.reply_string a").text("Ответить").removeClass("i-open");$("#reply_form").hide().remove().insertAfter($(this).parent().parent().parent().parent()).slideDown("middle");$("#reply_form div.close_icon div").unbind("click").click(function(){$("#reply_form").prev().find("div.reply_string a").text("Ответить").removeClass("i-open");$("#reply_form").slideUp("middle").find("h4").removeClass("attention")});$("#reply_form .button").click(function(){if($(this).hasClass("i-sent"))return false;$(this).addClass("i-sent");if($("#reply_form textarea").val()!=""){$("#reply_form form").submit()}else{$("#reply_form h4").addClass("attention");return false}}).hover(function(){$(this).addClass("button_hover")},function(){$(this).removeClass("button_hover")}).mousedown(function(){$(this).addClass("button_active")}).mouseup(function(){$(this).removeClass("button_active")});$("#reply_form textarea").val("").keyup(function(e){if(e.ctrlKey&&e.keyCode==13){if($(this).attr("value")!=""||$(this).text()!=""){$("#reply_form").children("form").submit()}else{return false}}}).keydown(function(e){if(e.ctrlKey&&e.keyCode==13){if($(this).attr("value")!=""||$(this).text()!=""){$("#reply_form").children("form").submit()}else{return false}}}).resizeTextarea();$(this).text("Скрыть").addClass("i-open");var e=$(this).parents("div.comment").attr("id");$("#reply_form").find("input[name='parentId']").attr({value:e});return false}).delegate("div.edit","click",function(){$("div.comments_block").find("div.edit_form").removeClass("edit_form");$(this).parents("div.comment").addClass("edit_form").find("textarea").resizeTextarea();$("div.comments_block").find("div.reply_string").css({visibility:"visible"});$("#reply_form").slideUp("middle")}).delegate("div.close_icon","click",function(){$(this).parents("div.comment").removeClass("edit_form")}).delegate("div.button","click",function(){checkForm(this)}).delegate("div.button","click",function(){checkForm(this)}).delegate("textarea","keyup",function(e){var t=this.parentNode;for(var i=0;i<t.childNodes.length;i++){if(t.childNodes[i].className.search("button")!=-1){var n=t.childNodes[i]}}if(e.ctrlKey&&e.keyCode==13){checkForm(n)}}).delegate("textarea","keydown",function(e){var t=this.parentNode;for(var i=0;i<t.childNodes.length;i++){if(t.childNodes[i].className.search("button")!=-1){var n=t.childNodes[i]}}if(e.ctrlKey&&e.keyCode==13){checkForm(n)}}).delegate("div.delete","click",function(){if(!confirm("Удалить комментарий?")){return false}else{var e=$(this).closest(".comment").attr("id");var t=String(window.location).split("?")[0]+"?delete_comment_id="+e+"&sessid="+$("#sessId").text()+"";window.location.href=t}});$("#personal_bar div.item a").click(function(){$("#personal_bar").children("div.act").removeClass("act");$(this).parent().addClass("act");return false});var e=0;$("#left_menu").find("div.switch").find("a").click(function(){$("#left_menu").find("ul.list").removeClass("act");$("#"+$(this).attr("rel")).addClass("act");$(this).parent().parent().children("div").removeClass("act");$(this).parent().addClass("act");return false});$("div.pager").children("div.pointer").hover(function(){$(this).addClass("hover")},function(){$(this).removeClass("hover")});$("#club_search_field").focus(function(){if(this.value=="Найти клуб"){this.value=""}});$("#club_search_field").blur(function(){if(this.value==""){this.value="Найти клуб"}});$("#add_post_form").find("div.button").click(function(){document.getElementById("add_post_form").submit()});$("#user_list").find("div.button").click(function(){document.getElementById("user_list").submit()});$("#edit_form").find("div.button").click(function(){checkForm(this)});$("#setup_form").find("div.button").click(function(){checkForm(this)});$("div.form_checkbox_pic img").click(function(){activateCheckbox(this)});$("div.form_checkbox_pic span").click(function(){activateCheckbox(this)});$("#edit_avatar").click(function(){$(this).parent("form").submit()});$("#save_recipe").click(function(){checkStageForm();return false});if($.placeholder)$("#helper_smartsearch").placeholder();$("#search_helper_link").click(function(){showHideLayer("top_layer");$("#search_helper div.body div.menu div.item").removeClass("act");$("#search_helper div.body div.menu div.item:eq(0)").addClass("act");$("#search_helper div.body div.search_blocks").css({display:"none"});$("#h_helper").css({display:"block"});$("#i_have_list div.bg table").empty();$("#i_have_dash").css({display:"block"});$("#search_helper").css({top:"0"}).removeClass("stage_helper").slideDown("middle");return false});$("#search_helper div.body div.slide_up_button").click(function(){$("#search_helper").slideUp("middle",function(){showHideLayer("top_layer")})});$("#search_helper div.body div.menu div.item a").click(function(){$("#search_helper div.body div.search_blocks").css({display:"none"});$("#"+$(this).attr("rel")).css({display:"block"});$(this).parent().parent().children("div.item").removeClass("act");$(this).parent().addClass("act");if($(this).attr("rel")=="h_ingredients"){$("#i_have_ingredients_list div.column ul").empty();$("#i_have_ingredients_list h2").empty();createGroupList()}return false});$("#i_have_button").click(function(){var e="/search/";$(this).parent().find("tr").each(function(){e+=$(this).find("span").text().toLowerCase()+"/"});window.location.href=e});$("#helper_smartsearch").focus(function(){if(this.value==""){this.value=""}});$("#helper_smartsearch").blur(function(){if(this.value==""){this.value=""}});var t=0;$("#helper_smartsearch").keyup(function(e){if(window.event)e=window.event;switch(e.keyCode?e.keyCode:e.which?e.which:null){case 38:if(t==0){smartsearchNavUp(this)}break;case 40:if(t==0){smartsearchNavDown(this)}break;default:smartsearchFunction(this)}});$("#helper_smartsearch").keypress(function(e){if(window.event)e=window.event;switch(e.keyCode?e.keyCode:e.which?e.which:null){case 38:t=1;smartsearchNavUp(this);break;case 40:t=1;smartsearchNavDown(this);break;case 13:t=0;pressEnter();break}})});function UpButton(){var e=this;t();function t(){if(!document.getElementById("top_panel")||!document.getElementById("body"))return;i();n();a();s();$(window).scroll().resize();$(document).mousemove()}function i(){$("body").prepend('<div id="upButton"><span class="b-up-button__up">Наверх</span><span class="b-up-button__down">Обратно</span></div>');$("body").prepend('<div id="upButtonClickable"></div>')}function n(){e.scrolled=r();e.memory=0;e.$elem=$("#upButton");e.$elem.data("object",e);e.$clickable=$("#upButtonClickable")}function a(){t();i();function t(){var t=$("#top_panel").offset().top+$("#top_panel").height()+50-e.scrolled;var i=$("#body").offset().left-100;e.$elem.css({top:t,left:i})}function i(){var t=$("#top_panel").offset().top+$("#top_panel").height()-e.scrolled;var i=0;var n=$("#body").offset().left-25;e.$clickable.css({height:$("#body").height()});var a=$(document).height()-t;if(n<0){n=0}e.$clickable.css({top:t,left:i,width:n,height:a})}}function r(){return window.pageYOffset||document.documentElement.scrollTop}function s(){$(window).scroll(l).resize(c);e.$clickable.click(s);$(document).mousemove(t);function t(t){if(e.scrolled<200){n()}if(t.pageX){e.pageX=t.pageX}if(!e.pageX)return;if(e.pageX<e.$clickable.width()&&e.scrolled>200||e.pageX<e.$clickable.width()&&e.scrolled==0&&e.memory!=0){i()}else{n()}}function i(){if(e.memory!=e.scrolled){e.$clickable.addClass("i-visible")}}function n(){e.$clickable.removeClass("i-visible")}function s(){t();function t(){var t=e.memory;e.memory=e.scrolled;$.scrollTo(t)}}function l(i){e.scrolled=r();o();t(i);if(!e.$elem.hasClass("i-reverse")){e.memory=0}}function c(e){a();t(e)}}function o(){if(e.scrolled>200){e.$elem.addClass("i-visible");e.$elem.removeClass("i-reverse")}else if(e.memory!=0){e.$elem.addClass("i-reverse")}else{e.$elem.removeClass("i-visible");e.$elem.removeClass("i-reverse")}}this.styleElements=function(){a()}}function SearchRecipeFeed(){var e=this;t();function t(){i();n()}function i(){e.$statistics=$("#fc_statistics");e.$getMoreButton=$("#get_more_recipes");e.recipesPerPage=27}function n(){e.$getMoreButton.click(a)}function a(){var t=[];for(var i=0;i<e.recipesPerPage;i++){if(allRecipesResult[0]){t[i]=allRecipesResult.shift()}}$.ajax({url:"/php/get_more_recipes.php",dataType:"json",data:"id="+t,beforeSend:function(){$("#get_more_recipes").addClass("preload")},success:function(e){$("#get_more_recipes").removeClass("preload");var t=$('<div class="block" style="display:none;"></div>');var i="";for(var n=0;n<e.recipes.length;n++){i+='<div class="item recipe_list_item"><div class="photo"><a href="'+e.recipes[n].href+'" title="'+e.recipes[n].name+'"><img src="'+e.recipes[n].src+'" width="170" alt="'+e.recipes[n].name+'" /></a></div><h5><a href="'+e.recipes[n].href+'">'+e.recipes[n].name+'</a></h5><p class="author">От: '+e.recipes[n].author+'</p><p class="info"><span class="comments_icon" title="Оставить отзыв"><noindex><a href="'+e.recipes[n].href+'#comments">'+e.recipes[n].comments+"</a></noindex></span></p></div>"}t.html(i);$("#recipe_feed_block").find("div.clear").before(t).end().find("div.block:last div.recipe_list_item div.photo a").each(function(){var e=$(this),t=e.children("img"),i=new Image;i.src=t.attr("src");var n=Math.floor(i.height*t.attr("width")/i.width);if(n>0){t.css({marginTop:parseInt(e.css("height"))/2-n/2+"px"})}else{t.load(function(){var n=Math.floor(i.height*t.attr("width")/i.width);if(n>0){t.css({marginTop:parseInt(e.css("height"))/2-n/2+"px"})}})}}).end().find("div.block:last").css({opacity:0}).show().animate({opacity:1},500);$.scrollTo($("#recipe_feed_block div.block:last div.item:first"),1e3);a();window.upButton.styleElements();function a(){var e=allRecipesResult.length;if(e==0){$("#get_more_recipes").hide()}else{$("#get_more_recipes").show()}}}});return false}function r(t){e.$statistics.find("span.num").text(t).end().find("span.word").text(i(t));function i(e){if(/(10|11|12|13|14|15|16|17|18|19)$/.test(e)){return"рецептов"}else if(/.*1$/.test(e)){return"рецепт"}else if(/[2-4]$/.test(e)){return"рецепта"}else{return"рецептов"}}}}function buttonActions(){$(".button").mousedown(function(){$(this).addClass("button_active")}).mouseup(function(){$(this).removeClass("button_active")}).hover(function(){$(this).addClass("button_hover")},function(){$(this).removeClass("button_hover")})}function deleteStageImage(e,t){deleteConfirm=1;if(confirm("Удалить?")){window.location.href=window.location+"?id="+t}else{$(e).css({backgroundPosition:"left top"});deleteConfirm=0}}function InputFile(e,t){var i=this;i.$elem=e;i.$input=i.$elem.find(":file");var n={},t=t||{};n.extentions=t.extentions||["jpg","jpeg"];n.messages=t.maessages||{wrongExtention:"Загружайте изображения в jpeg формате"};a();function a(){s();i.$name=i.$elem.find("div.new_file_name");i.$input.change(function(){o()})}function r(){i.$elem.find(":file").remove();i.$elem.find(".browse_button").after(i.$input)}function s(){i.$elem.html('<div class="browse_button" title="Выбрать файл"></div><div class="blocker"></div><div class="new_file_name"></div>');i.$elem.find(".browse_button").after(i.$input)}function o(){var e=f();var t=d(e);if(c(t)){i.$name.text(e);i.$name.removeClass("i-attention")}else{i.$name.text(n.messages.wrongExtention);i.$name.addClass("i-attention")}i.$name.css({display:"block"})}function l(e){var t=this.window.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest;if(!t){throw new Error("XMLHttpRequest not supported")}t.open("HEAD",e,false);t.send(null);if(!t.getResponseHeader){try{throw new Error("No getResponseHeader!")}catch(i){return false}}else if(!t.getResponseHeader("Content-Length")){try{throw new Error("No Content-Length!")}catch(n){return false}}else{return t.getResponseHeader("Content-Length")}}function c(e){var t=false;for(var i=0;i<n.extentions.length;i++){if(e.toLowerCase()==n.extentions[i])t=true}return t}function d(e){var t=/.*\.(.*)/;var i=e.replace(t,"$1");return i}function f(){var e=i.$input.val();reWin=/.*\\(.*)/;var t=e.replace(reWin,"$1");reUnix=/.*\/(.*)/;t=t.replace(reUnix,"$1");if(t.length>18){t="..."+t.substr(t.length-16,16)}return t}}function checkAForm(e){var t=0;var i=$("#form div.act");$(i).find("input[type!='hidden']").each(function(){if($(this).attr("value")==""){t=1;$(this).parent().addClass("attention")}else{$(this).parent().removeClass("attention")}});if(t==0){var n=$(i).children("form");if($(n).attr("name")=="lj_id"){var a=$(i).children("div.fields").find("input").attr("value");$(n).find("input").attr({value:"http://"+a+".livejournal.com"})}if($(n).attr("name")=="open_id"&&$(n).find("input").attr("value")=="http://"){return false}n.submit()}}function checkALayer(e){var t=0;var i=$("#authorization_layer div.relative div.padding div.act");$(i).find("input[type!='hidden']").each(function(){if($(this).attr("value")==""){t=1;$(this).parent().addClass("attention")}else{$(this).parent().removeClass("attention")}});if(t==0){var n=$(i).children("form");if($(n).attr("name")=="lj_id"){var a=$(i).children("div.fields").find("input").attr("value");$(n).find("input").attr({value:"http://"+a+".livejournal.com"})}if($(n).attr("name")=="open_id"&&$(n).find("input").attr("value")=="http://"){return false}n.submit()}}function searchForm(e){if(document.getElementById("recipe_search_field").value!=""){if(document.getElementById("recipe_search_field").value!="Я ищу"){if($(e).hasClass("button")){var t=new String($(e).siblings("input.text").attr("value"))}if($(e).hasClass("text")){var t=new String($(e).attr("value"))}var i=t.split(", ");var n=i.join("/");var a=String(window.location).split(document.domain)[0]+document.domain+"/search/"+n+"/";window.location.href=a}}}function checkForgetForm(){var e=$("#form").find("form");var t=$("form").find("input[name='login']");var i=$("form").find("input[name='e-mail']");if($(t).attr("value")!=""){e.submit()}else{if($(i).attr("value")!=""){var n=$(i).attr("value");var a=/^([^@\s]+)@((?:[-a-z0-9]+\.)+[a-z]{2,})$/i;if(!n.match(a)){$(i).parent().addClass("attention")}else{e.submit()}}}}function checkForm(e){if($(e).hasClass("i-sent"))return false;$(e).addClass("i-sent");if($(e).hasClass("i-processing"))return false;if(e.className=="text"&&!e.getAttribute("name")){if($(e).attr("value")==""&&$(e).parent().children("h5").children("span").text()!=""){$(e).parent().addClass("attention")}else{var t=$(e).parents("div.open_id").children("form");var i=$(e).attr("value");$(t).find("input").attr({value:"http://"+i+".livejournal.com"});t.submit()}}if(e.className=="text"&&e.getAttribute("name")||e.className.search("button")!=-1){var n=$(e).closest("form");if(n.attr("name")=="forget"){checkForgetForm()}else{var a=0;n.find("input[type!='hidden']").each(function(){if($(this).attr("value")==""&&$(this).parent().children("h5").children("span").text()!=""){if(this.getAttribute("name")&&this.getAttribute("name").search("PASSWORD_CONFIRM")!=-1){var e=this;var t;n.find("input[name*='PASSWORD']").each(function(){if(this!=e){t=this}});if($(t).attr("value")!=""){$(this).parent().addClass("attention");a=1}else{$(this).parent().removeClass("attention")}}else{a=1;$(this).parent().addClass("attention")}}else{if($(this).attr("name").search("mail")!=-1||$(this).attr("name").search("MAIL")!=-1){var i=$(this).attr("value");var r=/^([^@\s]+)@((?:[-a-z0-9]+\.)+[a-z]{2,})$/i;if(!i.match(r)){$(this).parent().addClass("attention");a=1}else{$(this).parent().removeClass("attention")}}else{if(this.getAttribute("name")&&this.getAttribute("name").search("PASSWORD_CONFIRM")!=-1){var e=this;var t;n.find("input[name*='PASSWORD']").each(function(){if(this!=e){t=this}});if($(this).attr("value")!=$(t).attr("value")){$(this).parent().addClass("attention");a=1}else{$(this).parent().removeClass("attention")}}else{$(this).parent().removeClass("attention")}}}});n.find("textarea").each(function(){if($(this).val()==""&&$(this).closest(".form_field").find("h4 span").text()!=""){a=1;$(this).closest(".form_field").addClass("attention")}});if(a==0){if($(e).hasClass("button")||$(e).hasClass("b-button"))$(e).addClass("i-processing");n.submit()}}}}function showHideLayer(e){var t=document.getElementById(e);if(t.style.display=="none"){t.style.display="block";if(e=="top_layer"){t.style.height=getyScroll()+"px";for(var i=0;i<t.childNodes.length;i++){if(t.childNodes[i].tagName=="IFRAME"){t.childNodes[i].style.height=getyScroll()+"px";t.childNodes[i].style.width="100%"}}}else{var n=$(t).height();if($(t).find("div.padding").height()!=""){n=$(t).find("div.padding").height()}if(document.documentElement.clientHeight>n){var a=document.documentElement.clientHeight/2+$(window).scrollTop()-n/2-20+"px"}else{var a=$(window).scrollTop()+20+"px"}if(e=="ingredients_list_layer"||e=="stage_ingredients_list_layer"){var a=$(window).scrollTop()+20+"px"}$("#"+e).animate({top:a},500,function(){$("#top_layer").height($(document).height()+30);$("#top_layer iframe").height($(document).height()+30)})}}else{t.style.display="none"}}function getyScroll(){var e=0;if(window.innerHeight&&window.scrollMaxY){e=window.innerHeight+window.scrollMaxY;var t=document.documentElement;var i=t&&t.clientHeight||document.body.clientHeight||window.innerHeight||self.innerHeight;e-=window.innerHeight-i}else if(document.body.scrollHeight>document.body.offsetHeight){e=document.body.scrollHeight}else{e=document.body.offsetHeight}return e}function writeChosenItems(e){}function increaseTopLayer(){var e=new String($("#ingredients_list_layer").css("top"));var t=parseInt(e.substring(0,e.length-2));var i=$("#ingredients_list").height()+140+t;if($("#top_layer").height()<i){$("#top_layer").height(i);$("#top_layer iframe").height(i)}else{$("#top_layer").height(getyScroll());$("#top_layer iframe").height(getyScroll())}}function addRemoveClass(e,t){var i=t;var n=new String(e.className);if(n.search(i)!=-1){n=n.split(i).join("")}else{n=n+" "+i}n=n.split("  ").join(" ");if(n.slice(0,1)==" "){n=n.slice(1,n.length)}if(n.slice(n.length-1)==" "){n=n.slice(0,n.length-1)}e.className=n}function checkNumberField(e){var t=e.value;if(t!=""){var i=/([\d.,/])$/i;if(!t.match(i)){e.value=t.slice(0,t.length-1);checkNumberField(e)}}}function clearArray(e){var t=e.length;for(var i=0;i<t;i++){e.pop()}}function activateCheckbox(e){var t=$(e).parent().children("img");var i=new String($(t).attr("src"));var n=$(e).parent().children("input");if(i.search("_act")!=-1){$(t).attr({src:"/images/checkbox.gif"});$(n).attr({value:"N"})}else{$(t).attr({src:"/images/checkbox_act.gif"});$(n).attr({value:"Y"})}}function pageX(e){return e.offsetParent?e.offsetLeft+pageX(e.offsetParent):e.offsetLeft}function pageY(e){return e.offsetParent?e.offsetTop+pageY(e.offsetParent):e.offsetTop}function NavigateThrough(e){if(!document.getElementById)return;if(window.event)e=window.event;if(e.ctrlKey){var t=null;var i=null;switch(e.keyCode?e.keyCode:e.which?e.which:null){case 37:t=document.getElementById("PrevLink");break;case 39:t=document.getElementById("NextLink");break;case 36:i="/";break}if(t&&t.href)document.location=t.href;if(i)document.location=i}}function stopEvent(e,t){if(!t)t=window.event;if(t.stopPropagation)t.stopPropagation();else t.cancelBubble=true}(function(e){var t=e.scrollTo=function(t,i,n){e(window).scrollTo(t,i,n)};t.defaults={axis:"xy",duration:parseFloat(e.fn.jquery)>=1.3?0:1,limit:true};t.window=function(t){return e(window)._scrollable()};e.fn._scrollable=function(){return this.map(function(){var t=this,i=!t.nodeName||e.inArray(t.nodeName.toLowerCase(),["iframe","#document","html","body"])!=-1;if(!i)return t;var n=(t.contentWindow||t).document||t.ownerDocument||t;return/webkit/i.test(navigator.userAgent)||n.compatMode=="BackCompat"?n.body:n.documentElement})};e.fn.scrollTo=function(n,a,r){if(typeof a=="object"){r=a;a=0}if(typeof r=="function")r={onAfter:r};if(n=="max")n=9e9;r=e.extend({},t.defaults,r);a=a||r.duration;r.queue=r.queue&&r.axis.length>1;if(r.queue)a/=2;r.offset=i(r.offset);r.over=i(r.over);return this._scrollable().each(function(){if(n==null)return;var s=this,o=e(s),l=n,c,d={},f=o.is("html,body");switch(typeof l){case"number":case"string":if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(l)){l=i(l);break}l=e(l,this);if(!l.length)return;case"object":if(l.is||l.style)c=(l=e(l)).offset()}e.each(r.axis.split(""),function(e,i){var n=i=="x"?"Left":"Top",a=n.toLowerCase(),u="scroll"+n,p=s[u],m=t.max(s,i);if(c){d[u]=c[a]+(f?0:p-o.offset()[a]);if(r.margin){d[u]-=parseInt(l.css("margin"+n))||0;d[u]-=parseInt(l.css("border"+n+"Width"))||0}d[u]+=r.offset[a]||0;if(r.over[a])d[u]+=l[i=="x"?"width":"height"]()*r.over[a]}else{var v=l[a];d[u]=v.slice&&v.slice(-1)=="%"?parseFloat(v)/100*m:v}if(r.limit&&/^\d+$/.test(d[u]))d[u]=d[u]<=0?0:Math.min(d[u],m);if(!e&&r.queue){if(p!=d[u])h(r.onAfterFirst);delete d[u]}});h(r.onAfter);function h(e){o.animate(d,a,r.easing,e&&function(){e.call(this,n,r)})}}).end()};t.max=function(t,i){var n=i=="x"?"Width":"Height",a="scroll"+n;if(!e(t).is("html,body"))return t[a]-e(t)[n.toLowerCase()]();var r="client"+n,s=t.ownerDocument.documentElement,o=t.ownerDocument.body;return Math.max(s[a],o[a])-Math.min(s[r],o[r])};function i(e){return typeof e=="object"?e:{top:e,left:e}}})(jQuery);jQuery.cookie=function(e,t,i){if(typeof t!="undefined"){i=i||{};if(t===null){t="";i.expires=-1}var n="";if(i.expires&&(typeof i.expires=="number"||i.expires.toUTCString)){var a;if(typeof i.expires=="number"){a=new Date;a.setTime(a.getTime()+i.expires*24*60*60*1e3)}else{a=i.expires}n="; expires="+a.toUTCString()}var r=i.path?"; path="+i.path:"";var s=i.domain?"; domain="+i.domain:"";var o=i.secure?"; secure":"";document.cookie=[e,"=",encodeURIComponent(t),n,r,s,o].join("")}else{var l=null;if(document.cookie&&document.cookie!=""){var c=document.cookie.split(";");for(var d=0;d<c.length;d++){var f=jQuery.trim(c[d]);if(f.substring(0,e.length+1)==e+"="){l=decodeURIComponent(f.substring(e.length+1));break}}}return l}};(function(e){var t={minHeight:50,maxHeight:300};e.fn.resizeTextarea=function(i){var n=e.extend({},i,t);e(this).each(function(){var t=e(this),i={setHeight:function(){t.height(n.minHeight);if(t.height()!=getScrollHeight(t)){if(getScrollHeight(t)>n.maxHeight){t.height(n.maxHeight)}else{t.height(getScrollHeight(t)||n.minHeight)}}}};i.setHeight();t.attr({rows:n.minHeight});t.keyup(function(){i.setHeight()})});return e(this)}})(jQuery);function getScrollHeight(e){e.scrollTop(e.get(0).scrollHeight);var t=e.scrollTop()+e.height();e.scrollTop(0);return t}function esc(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")}function tmpl(e){var t="var __p=[],print=function(){__p.push.apply(__p,arguments);};"+"with(obj||{}){__p.push('"+e.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(/<%-([\s\S]+?)%>/g,function(e,t){return"',esc("+t.replace(/\\'/g,"'")+"),'"
}).replace(/<%=([\s\S]+?)%>/g,function(e,t){return"',"+t.replace(/\\'/g,"'")+",'"}).replace(/<%([\s\S]+?)%>/g,function(e,t){return"');"+t.replace(/\\'/g,"'").replace(/[\r\n\t]/g," ")+";__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');";var i=new Function("obj",t);return function(e){return i.call(this,e)}}jQuery.fn.addtocopy=function(e){var t={htmlcopytxt:'<br>More: <a href="'+window.location.href+'">'+window.location.href+"</a><br>",minlen:25,addcopyfirst:false};$.extend(t,e);var i=document.createElement("span");i.id="ctrlcopy";i.innerHTML=t.htmlcopytxt;return this.each(function(){$(this).mousedown(function(){$("#ctrlcopy").remove()});$(this).mouseup(function(){if(window.getSelection){var e=window.getSelection();var n=e.toString();if(!n||n.length<t.minlen)return;var a=e.getRangeAt(0);n=a.cloneRange();n.collapse(t.addcopyfirst);n.insertNode(i);if(!t.addcopyfirst)a.setEndAfter(i);e.removeAllRanges();e.addRange(a)}else if(document.selection){var e=document.selection;var a=e.createRange();var n=a.text;if(!n||n.length<t.minlen)return;n=a.duplicate();n.collapse(t.addcopyfirst);n.pasteHTML(i.outerHTML);if(!t.addcopyfirst){a.setEndPoint("EndToEnd",n);a.select()}}})})};function DoYouKnowThat(e){var t=this;i();function i(){if(!document.getElementById(e))return false;t.$elem=$("#"+e);n()}function n(){e();function e(){t.$elem.find(".b-facts__more__link").click(e);function e(){if(!t.factsArray){e();return false}a();i();function e(){$.getJSON("/php/get_more_facts.php",e);function e(e,i,n){t.factsArray=e.facts;a()}}function i(){if(!window.ga)return;ga("send","event","Знаете ли вы что","Нажали кнопку Еще",t.$elem.find(".b-facts__item").text())}return false}}}function a(){if(!t.factsArray){t.$elem.find(".b-facts__more__link").click();return false}var e=n();i();function i(){t.$elem.find(".b-facts__item").fadeOut(500,function(){t.$elem.find(".b-facts__item").attr({"data-id":e.id}).html(e.text).fadeIn(500)})}function n(){var e={id:t.$elem.find(".b-facts__item").attr("data-id"),text:t.$elem.find(".b-facts__item").text()};while(t.factsArray[0].id==e.id){n()}var i=t.factsArray[0];n();function n(){t.factsArray.push(t.factsArray.shift())}return i}}}function FilterRecipes(){var e=this;t();function t(){i()}function i(){$("#filter_recipes").delegate(".item a","click",e);function e(){var e=$(this),t=4,i=a(),n=r(i);s();function a(){var t=e.parent()[0].className.split(/\s*item\s*/);for(var i=0;i<t.length;i++){if(t[i]!=""){t=t[i];break}}return t}function r(e){switch(e){case"cuisine":return cuisineArray;case"dish":return dishTypeArray;case"ingredient":return mainIngredientArray;case"tag":return tagArray}return cuisineArray}function s(){if(e.hasClass("open")){$("#filter_list").slideUp("middle").empty();e.removeClass("open");document.getElementById("filter_list").className="";return}var a="",r=Math.ceil(n[1].length/t);a+='<div class="pad"><table>';for(var s=0;s<r;s++){a+="<tr>";for(var o=0;o<t;o++){x=r*o+s;if(n[0][x]){a+='<td><a href="#" rel="'+n[0][x]+'">'+n[1][x]+"</a></td>"}else{a+="<td><span></span></td>"}}a+="</tr>"}a+="</table></div>";$("#filter_list").html(a).slideDown("middle");$("#filter_recipes .item a").removeClass("open");e.addClass("open");document.getElementById("filter_list").className=i}return false}}}function Filter(e){var t=this;i();function i(){t.$elem=e;t.$lists=t.$elem.find(".b-filter__lists");t.$list=t.$elem.find(".b-filter__list");n()}function n(){e.delegate(".b-filter__item__button","click",i);function i(){var e=$(this),i=parseInt(t.$elem.attr("data-col"),10),n=window[e.closest(".b-filter__item").attr("data-array")];if(e.hasClass("open")){t.$list.slideUp("middle").empty();e.removeClass("open")}else{a()}function a(){var a="",r=Math.ceil(n.length/i);a+='<div class="pad"><table>';for(var s=0;s<r;s++){a+="<tr>";for(var o=0;o<i;o++){x=r*o+s;if(n[x]){a+='<td><a href="#" rel="'+n[x].id+'">'+n[x].name+"</a></td>"}else{a+="<td><span></span></td>"}}a+="</tr>"}a+="</table></div>";t.$list.html(a).slideDown("middle");t.$elem.find(".b-filter__item__button").removeClass("open");e.addClass("open")}return false}}}function FilterList(){var e=this;e.recipesPerPage=27;e.makeRequest=true;t();function t(){if(!document.getElementById("filter_list"))return false;i();n()}function i(){var e=t();i(e);n(e);function t(){var e=n();var t={};for(var i in e){if(i=="cuisine"||i=="dish"||i=="ingredient"||i=="tag"){t.type=i;t.data=e[i]}}t.num=e.num;return t;function n(){var e=window.location.search;var t=/([a-z0-9]+)=([a-z0-9]+)/gi;var i;var n={};while((i=t.exec(e))!=null){n[i[1]]=i[2]}return n}}function i(e){var t={};for(var i in e){t[i]=e[i]}if(!t.num){t.num=$("#recipe_feed_block .recipe_list_item").size()}t.allRecipesNum=parseInt($("#fc_statistics span.num").text(),10);t.recipes=_();var n=window.History;if(!n.enabled)return;n.pushState(t)}function n(e){if(e.type&&e.data){r(e.type,e.data,e.num,true)}else if(e.num){s(e.num,true)}}}function n(){$("#filter_list").click(function(e){e.stopPropagation()}).delegate("a","click",a);d();$("#get_more_recipes a").click(l)}function a(){var e=document.getElementById("filter_list").className,t=this.getAttribute("rel");r(e,t);$("#filter_list").hide().empty();return false}function r(t,i,n,a){var r=e.recipesPerPage;if(n)r=n;$.ajax({url:"/php/all_recipes_result.php",dataType:"json",data:"num="+r+"&type="+t+"&data="+i,beforeSend:s,success:l});function s(){o()}function l(n){allRecipesResult=n.id;var r=parseInt(allRecipesResult.length,10)+parseInt(n.recipes.length,10);e.makeRequest=false;c({type:t,data:i,num:n.recipes.length,recipes:n.recipes,allRecipesNum:r},a);setTimeout(function(){f(window.History.getState())},0)}}function s(t,i){var n=e.recipesPerPage;if(t)n=t;$.ajax({url:"/php/last_recipes_result.php",dataType:"json",data:"num="+n,beforeSend:a,success:r});function a(){o()}function r(t){var n=parseInt(t.id.length,10)+parseInt(t.recipes.length,10);e.makeRequest=false;c({num:t.recipes.length,recipes:t.recipes,allRecipesNum:n},i);setTimeout(function(){f(window.History.getState())},0)}}function o(){$("#recipe_feed_block").empty().html('<div class="preloader"><img src="/images/preloader.gif" width="281" height="52" alt="" /></div>')}function l(){var t=[];for(var i=0;i<e.recipesPerPage;i++){if(allRecipesResult[0]){t[i]=allRecipesResult.shift()}}$.ajax({url:"/php/get_more_recipes.php",dataType:"json",data:"id="+t,beforeSend:function(){$("#get_more_recipes").addClass("preload")},success:function(e){$("#get_more_recipes").removeClass("preload");var t=$('<div class="block" style="display:none;"></div>');var i="";for(var a=0;a<e.recipes.length;a++){i+='<div class="item recipe_list_item"><div class="photo"><a href="'+e.recipes[a].href+'" title="'+e.recipes[a].name+'"><img src="'+e.recipes[a].src+'" width="170" alt="'+e.recipes[a].name+'" /></a></div><h5><a href="'+e.recipes[a].href+'">'+e.recipes[a].name+'</a></h5><p class="author">От: '+e.recipes[a].author+'</p><p class="info"><span class="comments_icon" title="Оставить отзыв"><noindex><a href="'+e.recipes[a].href+'#comments">'+e.recipes[a].comments+"</a></noindex></span></p></div>"}t.html(i);$("#recipe_feed_block").find("div.clear").before(t).end().find("div.block:last div.recipe_list_item div.photo a").each(function(){var e=$(this),t=e.children("img"),i=new Image;i.src=t.attr("src");var n=Math.floor(i.height*t.attr("width")/i.width);if(n>0){t.css({marginTop:parseInt(e.css("height"))/2-n/2+"px"})}else{t.load(function(){var n=Math.floor(i.height*t.attr("width")/i.width);if(n>0){t.css({marginTop:parseInt(e.css("height"))/2-n/2+"px"})}})}}).end().find("div.block:last").css({opacity:0}).show().animate({opacity:1},500);$.scrollTo($("#recipe_feed_block div.block:last div.item:first"),1e3);n(e);h();window.upButton.styleElements()}});return false;function n(t){var i=window.History;if(!i.enabled)return;e.makeRequest=false;var n=i.getState();n.data.num=$("#recipe_feed_block .recipe_list_item").size();if(n.data.recipes&&t.recipes){n.data.recipes=n.data.recipes.concat(t.recipes)}c(n.data,false)}}function c(e,t){var i=window.History;if(!i.enabled)return;var n=a();if(t){i.replaceState(e,"Рецепты",n);return}i.pushState(e,"Рецепты",n);function a(){var t=[];if(e.type&&e.data){t.push(e.type+"="+e.data)}t.push("num="+e.num);t=t.join("&");if(t!=""){t="?"+t}return t}}function d(){var t=window.History;if(!t.enabled)return;t.Adapter.bind(window,"statechange",function(){if(e.makeRequest){var i=t.getState();if(i.data.recipes){f(i)}else{r(null,null)}}e.makeRequest=true})}function f(e){if(e.data.type&&e.data.data){var t=p(e.data.type);var i=m(t,e.data.data);g($("."+e.data.type+" a"),i)}else{g($(),"")}v(e.data.recipes);b(e.data.allRecipesNum);u();h()}function h(){var e=window.History;if(e.enabled){var t=e.getState();var i=t.data.allRecipesNum-t.data.recipes.length}else{var i=allRecipesResult.length}if(i==0){$("#get_more_recipes").hide()}else{$("#get_more_recipes").show()}}function u(){$("#topbar div.item").each(function(){if($(this).text()=="Рецепты"){if(window.search&&window.search!=""){$(this).html('<a href="'+window.pathname+'"><span>Рецепты</span></a>')}else{$(this).html("<span><span>Рецепты</span></span>")}}})}function p(e){switch(e){case"cuisine":return cuisineArray;case"dish":return dishTypeArray;case"ingredient":return mainIngredientArray;case"tag":return tagArray}}function m(e,t){for(var i=0;i<e[0].length;i++){if(e[0][i]==t){return e[1][i]}}}function v(e){var t="";for(var i=0;i<e.length;i++){t+='<div class="item recipe_list_item"><div class="photo"><a href="'+e[i].href+'" title="'+e[i].name+'"><img src="'+e[i].src+'" width="170" alt="'+e[i].name+'" /></a></div><h5><a href="'+e[i].href+'">'+e[i].name+'</a></h5><p class="author">От: '+e[i].author+'</p><p class="info"><span class="comments_icon" title="Оставить отзыв"><noindex><a href="'+e[i].href+'#comments">'+e[i].comments+"</a></noindex></span></p></div>"}t+='<div class="clear"></div>';$("#recipe_feed_block").html(t).find("div.recipe_list_item div.photo a").each(function(){var e=$(this),t=e.children("img"),i=new Image;i.src=t.attr("src");var n=Math.floor(i.height*t.attr("width")/i.width);if(n>0){t.css({marginTop:parseInt(e.css("height"))/2-n/2+"px"})}else{t.load(function(){var n=Math.floor(i.height*t.attr("width")/i.width);if(n>0){t.css({marginTop:parseInt(e.css("height"))/2-n/2+"px"})}})}})}function g(e,t){$("#filter_recipes a.active").removeClass("active").find("span.bg span").text("—");e.removeClass("open").addClass("active").find("span.bg span").text(t)}function _(){var e=[];$("#recipe_feed_block div.item").each(function(){var t=$(this);e.push({name:t.find("h5 a").text(),href:t.find("h5 a").attr("href"),src:t.find("img").attr("src"),author:t.find(".author").text().substring(4),comments:t.find(".comments_icon a").text()})});return e}function b(e){$("#fc_statistics").find("span.num").text(e).end().find("span.word").text(t(e));function t(e){if(/(10|11|12|13|14|15|16|17|18|19)$/.test(e)){return"рецептов"}else if(/.*1$/.test(e)){return"рецепт"}else if(/[2-4]$/.test(e)){return"рецепта"}else{return"рецептов"}}}}function valignRecipePreviewPhoto(){$("div.recipe_list_item div.photo a, .b-recipe-preview__photo__link").each(function(){var e=$(this),t=e.children("img"),i=new Image;i.src=t.attr("src");var n=Math.floor(i.height*t.attr("width")/i.width);if(n>0){t.css({marginTop:parseInt(e.css("height"))/2-n/2+"px"})}else{t.load(function(){var n=Math.floor(i.height*t.attr("width")/i.width);if(n>0){t.css({marginTop:parseInt(e.css("height"))/2-n/2+"px"})}})}})}function favoriteButtons(){$(".b-favorite-button").hover(function(){$(this).addClass("i-hover").stop().animate({width:"79px"},function(){$(this).find(".b-favorite-button__text").css({display:"inline-block"})})},function(){$(this).find(".b-favorite-button__text").hide();$(this).stop().animate({width:"35px"},function(){$(this).removeClass("i-hover")})}).click(e);function e(){if(!window.ga)return;var e=$(this);if(e.hasClass("i-remove-favorite")){_gaq.push(["_trackEvent","Избранное","Удалили из избранного"]);ga("send","event","Избранное","Удалили из избранного")}else{_gaq.push(["_trackEvent","Избранное","Добавили в избранное"]);ga("send","event","Избранное","Добавили в избранное")}}}function ajaxError(e,t,i){if(window.console){console.log(e);console.log(t);console.log(i)}}if(window.BX){BX.addCustomEvent("onFrameDataReceived",function(){favoriteButtons();$("#top_panel span.kitchen > a").click(function(e){$(this).siblings("span.submenu").slideToggle("middle").end().children("span").toggleClass("up").toggleClass("down");stopEvent(this,e);return false});$("#top_panel div.add > a.button").click(function(e){$(this).siblings("span.submenu").children("span.body").slideToggle("middle");stopEvent(this,e);return false})})}